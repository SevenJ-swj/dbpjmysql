<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="all,follow">

    <title>Scholar Graph </title>
    <link rel="shortcut icon" href="img/favicon.ico">

    <!-- global stylesheets -->
    <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed" rel="stylesheet">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="css/font-icon-style.css">
    <link rel="stylesheet" href="css/style.default.css" id="theme-stylesheet">
    <link rel="stylesheet" type="text/css" href="css/table-style.css">

</head>

<body>

<!--====================================================
                         MAIN NAVBAR
======================================================-->
<header class="header">
    <nav class="navbar navbar-expand-lg ">
        <div class="container-fluid ">
            <div class="navbar-holder d-flex align-items-center justify-content-between">
                <div class="navbar-header">
                    <a href="index.html" class="navbar-brand">
                        <div class="brand-text brand-big hidden-lg-down"><img src="img/logo-white.png" alt="Logo"
                                                                              class="logo-white"></div>
                        <div class="brand-text brand-small"><img src="img/logo-icon.png" alt="Logo" class="img-fluid">
                        </div>
                    </a>
                    <a id="toggle-btn" href="#" class="menu-btn active">
                        <span></span>
                        <span></span>
                        <span></span>
                    </a>
                </div>
            </div>
            <ul class="nav-menu list-unstyled d-flex flex-md-row align-items-md-center">
                <!-- Expand-->
                <li class="nav-item d-flex align-items-center full_scr_exp"><a class="nav-link" href="#"><img
                        src="img/expand.png" onclick="toggleFullScreen(document.body)" class="img-fluid" alt=""></a>
                </li>
                <li class="nav-item dropdown"><a id="profile" class="nav-link logout" data-target="#" href="#"
                                                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><img
                        src="img/avatar-1.jpg" alt="..." class="img-fluid rounded-circle"
                        style="height: 30px; width: 30px;"></a>
                    <ul aria-labelledby="profile" class="dropdown-menu profile">
                        <li>
                            <a rel="nofollow" href="profile.html" class="dropdown-item">
                                <div class="notification">
                                    <div class="notification-content"><i class="fa fa-power-off"></i>Logout</div>
                                </div>
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
    </nav>
</header>

<!--====================================================
                        PAGE CONTENT
======================================================-->
<div class="page-content d-flex align-items-stretch">

    <!--***** SIDE NAVBAR *****-->
    <nav class="side-navbar">
        <div class="sidebar-header d-flex align-items-center">
            <div class="avatar"><img src="img/avatar-1.jpg" alt="..." class="img-fluid rounded-circle"></div>
            <div class="title">
                <h1 class="h4">Team 10</h1>
            </div>
        </div>
        <hr>
        <!-- Sidebar Navidation Menus-->
        <ul class="list-unstyled">
            <li><a href="index.html"><i class="icon-home"></i>home</a></li>
            <li><a href="#apps" aria-expanded="false" data-toggle="collapse"> <i class="icon-interface-windows"></i>查询
            </a>
                <ul id="apps" class="collapse list-unstyled show">
                    <li><a href="query_MySQL.html">MySQL</a></li>
                    <li><a href="query_Neo4j.html" class='uncollasped'>Neo4j</a></li>
                    <li><a href="comparision.html">性能对比</a></li>
                </ul>
            </li>
            <li><a href="insert.html"> <i class="fa fa-bar-chart"></i>插入 </a></li>
            <li><a href="delete.html"> <i class="fa fa-map-o"></i>删除 </a></li>
    </nav>

    <div class="content-inner calendar-cont">

        <!-- search box -->
        <div class="search-box">
            <button class="search-btn"><a id="search" class="nav-link" href="#"><i class="icon-search"></i></a></button>
            <form id="searchForm" action="#" role="search">
                <input type="search" placeholder="请输入Neo4j语句" class="form-control" id="Neo4j-query">
            </form>
        </div>

        <!-- search-result -->
        <div class='search-result'>
            <table border="1">
                <tr>
                    <th>title</th>
                    <th>field</th>
                    <th>abstract</th>
                    <th>citation</th>
                    <th>year</th>
                    <th>department</th>
                    <th>conference</th>
                    <th>authors</th>
                    <th>pages</th>
                </tr>
                <tr>
                    <td>class="search-</td>
                    <td>class="search-</td>
                    <td>
                        class="search-class="search-class="search-class="search-class="search-class="search-class="search-class="search-class="search-class="search-00000000000000000000000000000000000000000000000000000000000000000000000000000000000000
                    </td>
                    <td>class="search-</td>
                    <td>5</td>
                    <td>class="search-</td>
                    <td>class="search-</td>
                    <td>class="search-</td>
                    <td>9</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>2</td>
                    <td>3</td>
                    <td>4</td>
                    <td>5</td>
                    <td>6</td>
                    <td>7</td>
                    <td>8</td>
                    <td>9</td>
                </tr>
            </table>
        </div>
    </div>
</div>

<!--Global Javascript -->
<script src="js/jquery.min.js"></script>
<script src="js/popper/popper.min.js"></script>
<script src="js/tether.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery.cookie.js"></script>
<script src="js/jquery.validate.min.js"></script>
<script src="js/chart.min.js"></script>
<script src="js/front.js"></script>

<!--Core Javascript -->
<script>
    $(document).ready(function () {
        // Neo4j数据作关系图
        $.PaintGraph = function (data) {
            myChart.hideLoading();

            option = {
                legend: {
                    data: ['paper', 'author', 'conference', 'field', 'department']
                },
                series: [{
                    type: 'graph',
                    layout: 'force',
                    animation: false,
                    label: {
                        normal: {
                            position: 'right',
                            formatter: '{b}'
                        }
                    },
                    draggable: true,
                    data: data.nodes.map(function (node, idx) {
                        node.id = idx;
                        return node;
                    }),
                    categories: data.categories,
                    force: {
                        // initLayout: 'circular'
                        // repulsion: 20,
                        edgeLength: 5,
                        repulsion: 20,
                        gravity: 0.2
                    },
                    edges: data.links
                }]
            };

            myChart.setOption(option);
        }

        // 查询结果
        $('#search').click(function () {
            Neo4j_query = $('#Neo4j-query').val()
            $("table").show()

            $.ajax({
                type: 'POST',
                url: 'neo4j/query',
                data: {
                    Neo4j_query: Neo4j_query
                },
                dataType: 'json',
                success: function (res) {
                    // 渲染Neo4j返回结果
                    if (res.code == 0) {
                        var dom = $("#Neo4j-result");
                        var myChart = echarts.init(dom);
                        var app = {};
                        option = null;
                        myChart.showLoading();
                        $.PaintGraph(res.data)

                        if (option && typeof option === "object") {
                            myChart.setOption(option, true);
                        }
                    } else {
                        alert('query fail')
                    }
                }
            })
        })
    })
</script>

</body>

</html>